<h3>My Account</h3>

<p>&nbsp;</p>

<p>Username: {{ ctrl.user.username }}</p>

<p>&nbsp;</p>

<button id="users-show-edit-settings-button" class="btn btn-primary" ng-click="ctrl.toggleForm()">Edit Settings</button>

<div class="panel panel-default" ng-show="ctrl.showForm">
  <div class="panel-body">
    <form name="form" ng-submit="ctrl.updateUser()">
      <div class="form-group">
        <label>Username</label>
        <input type="text" name="username" class="form-control" ng-model="ctrl.user.username" required="required" minlength=4 maxlength=8 ng-pattern="/^[a-zA-Z0-9]+$/" />
        <div ng-messages="form.username.$error" ng-messages-multiple>
          <div class="alert alert-warning" ng-message="required" ng-if="form.username.$touched">Please enter a username.</div>
          <div class="alert alert-warning" ng-message="minlength, maxlength, pattern" ng-if="form.username.$touched">Please choose a username between 4 to 8 characters long, using letters and numbers only.</div>
        </div>
      </div>
      <div class="form-group">
        <label>Current Password</label>
        <input type="password" name="currentPassword" class="form-control" ng-model="ctrl.currentPassword" required="required" minlength=4 maxlength=16 />
        <div ng-messages="form.currentPassword.$error" ng-messages-multiple>
          <div class="alert alert-warning" ng-message="required" ng-if="form.currentPassword.$touched">Please enter your current password.</div>
        </div>
      </div>
      <div class="form-group">
        <label>New Password</label>
        <input type="password" name="password" class="form-control" ng-model="ctrl.user.password" minlength=4 maxlength=16 ng-pattern="/^[a-zA-Z0-9]+$/" />
        <div ng-messages="form.password.$error" ng-messages-multiple>
          <div class="alert alert-warning" ng-message="minlength, maxlength, pattern" ng-if="form.password.$touched">Please choose a password 4 to 16 characters long, using letters and numbers only.</div>
        </div>
      </div>
      <div class="form-group">
        <label>Confirm New Password</label>
        <input type="password" name="confirmPassword" class="form-control" ng-model="ctrl.confirmPassword" compare-to="ctrl.user.password" />
        <div ng-messages="form.confirmPassword.$error">
          <div class="alert alert-warning" ng-message="compareTo" ng-if="form.confirmPassword.$touched">Passwords must match.</div>
        </div>
      </div>
      <input type="submit" id="submit" value="Update" class="btn btn-primary" />
  </div>
</div>
